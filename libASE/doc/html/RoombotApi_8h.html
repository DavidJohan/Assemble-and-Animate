<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>ASE: /home/david/ASE/src/targets/roombot/roombot-webots/RoombotApi.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_5305d82f8fb50ad9c70d324e25522190.html">src</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_64c2e205eb5b24ad2617eaab2cf56d4f.html">targets</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_5020e4dbaddc8b6289ccfbc41513570e.html">roombot</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_17327e332073e0944d083d24658b1e40.html">roombot-webots</a>
  </div>
</div>
<div class="contents">
<h1>RoombotApi.h File Reference</h1><code>#include &lt;webots/robot.h&gt;</code><br>

<p>
<a href="RoombotApi_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="RoombotApi_8h.html#b8429449b16ac6f6cb25714d697b8f89">roombotApi_init</a> (void(*handler)(char *, char, char))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="RoombotApi_8h.html#cc55c939066b123cefc062bd4c717b6e">roombotApi_connect</a> (int connectorID)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="RoombotApi_8h.html#437e7e0271b532fb9e036aefc59df188">roombotApi_disconnect</a> (int connectorID)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="RoombotApi_8h.html#316d949c3e73b3cdbda40bd1878a7d50">roombotApi_isConnected</a> (int connectorID)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="RoombotApi_8h.html#6d1953a24103e6c12d5794a62dc3b7dd">roombotApi_getConnectorPresence</a> (int connectorID)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="RoombotApi_8h.html#a16cacb2bcf45444fba5b8368510b101">roombotApi_getServoPosition</a> (int servoID)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="RoombotApi_8h.html#929da0f93b13ae0c31a1371e06d133bc">roombotApi_setServoPosition</a> (int servoID, double goal)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="RoombotApi_8h.html#614aad6d05afc6e989728c7d15b64e76">roombotApi_sendMessage</a> (char *msg, int length, int channel)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="RoombotApi_8h.html#3ab90b531a04ac7a26647838a881eae5">roombotApi_sendMessageToAll</a> (char *msg, int length)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="RoombotApi_8h.html#ea11b23768dacee3958e205daed3c56c">roombotApi_setMessageHandler</a> (void(*handler)(char *, char, char))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="RoombotApi_8h.html#890a476a75af7f5a94d61e4c94e6685e">roombotApi_checkForEvents</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="RoombotApi_8h.html#51ce7fd6cf789f0be278710eb4aec51d">roombotApi_getLocalTime</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="RoombotApi_8h.html#a3c354c2c9293ec5c904d8b9c950a600">roombotApi_getLocalMsTime</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="RoombotApi_8h.html#89f255c0c0869d4e07a45e0bea706287">roombotApi_getRandomSeed</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="RoombotApi_8h.html#eda933fbe6eb29f7c21e9e3006f45e1d">roombotApi_getID</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="RoombotApi_8h.html#d9de3fd7561cb52f9cb9a004040b6240">roombotApi_runTestProgram</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="RoombotApi_8h.html#16e3bf0340bd415f873b29010c32b93f">roombotApi_getEnergyConsumed</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="RoombotApi_8h.html#7df3191ac65baf836b40a4f6ac315f31">roombotApi_getAccelerometerValue</a> (int axis)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This is an Webots based API for Roombot which should be transferable to the real modules. It abstracts away Webot specific details and provides a clean C interface to controlling a module.<p>
The following notation is used for mapping the Webot tags to integer IDs:<ul>
<li>Connectors have index 0...9 (starting from C0X,COY,COZ,C1X,...,C3Z)</li><li>IR communication channels index: 0...9 and corrosponds to the connectors</li><li>Radio communication channel have index 10</li><li>Actuators have index s1=0, m1=1, s2=2</li></ul>
<p>
Further it is assumed that the modules name in webots is on the form "module_X" where X is a unique hardware ID of the module.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd>AbstractModuleApi.h</dd></dl>
Created on: July, 2009<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>David Johan Christensen, Modular Robotics Lab, University of Southern Denmark </dd></dl>
<dl class="note" compact><dt><b>Note:</b></dt><dd>This software is distributed under the BSD open-source license. </dd></dl>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="890a476a75af7f5a94d61e4c94e6685e"></a><!-- doxytag: member="RoombotApi.h::roombotApi_checkForEvents" ref="890a476a75af7f5a94d61e4c94e6685e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int roombotApi_checkForEvents           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Checks for new messages, must be called often (every step) 
</div>
</div><p>
<a class="anchor" name="cc55c939066b123cefc062bd4c717b6e"></a><!-- doxytag: member="RoombotApi.h::roombotApi_connect" ref="cc55c939066b123cefc062bd4c717b6e" args="(int connectorID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void roombotApi_connect           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>connectorID</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Connect connector with ID connectorID 
</div>
</div><p>
<a class="anchor" name="437e7e0271b532fb9e036aefc59df188"></a><!-- doxytag: member="RoombotApi.h::roombotApi_disconnect" ref="437e7e0271b532fb9e036aefc59df188" args="(int connectorID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void roombotApi_disconnect           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>connectorID</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Disconnect connector with ID connectorID 
</div>
</div><p>
<a class="anchor" name="7df3191ac65baf836b40a4f6ac315f31"></a><!-- doxytag: member="RoombotApi.h::roombotApi_getAccelerometerValue" ref="7df3191ac65baf836b40a4f6ac315f31" args="(int axis)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double roombotApi_getAccelerometerValue           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>axis</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get acceleration on a given axis 
</div>
</div><p>
<a class="anchor" name="6d1953a24103e6c12d5794a62dc3b7dd"></a><!-- doxytag: member="RoombotApi.h::roombotApi_getConnectorPresence" ref="6d1953a24103e6c12d5794a62dc3b7dd" args="(int connectorID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int roombotApi_getConnectorPresence           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>connectorID</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If another connnector on another module is nearby the specific connector 
</div>
</div><p>
<a class="anchor" name="16e3bf0340bd415f873b29010c32b93f"></a><!-- doxytag: member="RoombotApi.h::roombotApi_getEnergyConsumed" ref="16e3bf0340bd415f873b29010c32b93f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float roombotApi_getEnergyConsumed           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get an estimate of the energy consumed by actuators since the module were started. Disclamer: very uncertain 
</div>
</div><p>
<a class="anchor" name="eda933fbe6eb29f7c21e9e3006f45e1d"></a><!-- doxytag: member="RoombotApi.h::roombotApi_getID" ref="eda933fbe6eb29f7c21e9e3006f45e1d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int roombotApi_getID           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the hardware ID of the module 
</div>
</div><p>
<a class="anchor" name="a3c354c2c9293ec5c904d8b9c950a600"></a><!-- doxytag: member="RoombotApi.h::roombotApi_getLocalMsTime" ref="a3c354c2c9293ec5c904d8b9c950a600" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long roombotApi_getLocalMsTime           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the time (in milli-seconds) since the module were started. Not will be different on different modules (at least in hardware) 
</div>
</div><p>
<a class="anchor" name="51ce7fd6cf789f0be278710eb4aec51d"></a><!-- doxytag: member="RoombotApi.h::roombotApi_getLocalTime" ref="51ce7fd6cf789f0be278710eb4aec51d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double roombotApi_getLocalTime           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the time (in seconds) since the module were started. Not will be different on different modules (at least in hardware) 
</div>
</div><p>
<a class="anchor" name="89f255c0c0869d4e07a45e0bea706287"></a><!-- doxytag: member="RoombotApi.h::roombotApi_getRandomSeed" ref="89f255c0c0869d4e07a45e0bea706287" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long roombotApi_getRandomSeed           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get a random seed which is different on each module 
</div>
</div><p>
<a class="anchor" name="a16cacb2bcf45444fba5b8368510b101"></a><!-- doxytag: member="RoombotApi.h::roombotApi_getServoPosition" ref="a16cacb2bcf45444fba5b8368510b101" args="(int servoID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double roombotApi_getServoPosition           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>servoID</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get position of the actuator with id [0,1,2] 
</div>
</div><p>
<a class="anchor" name="b8429449b16ac6f6cb25714d697b8f89"></a><!-- doxytag: member="RoombotApi.h::roombotApi_init" ref="b8429449b16ac6f6cb25714d697b8f89" args="(void(*handler)(char *, char, char))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void roombotApi_init           </td>
          <td>(</td>
          <td class="paramtype">void(*)(char *, char, char)&nbsp;</td>
          <td class="paramname"> <em>handler</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initilizes the API 
</div>
</div><p>
<a class="anchor" name="316d949c3e73b3cdbda40bd1878a7d50"></a><!-- doxytag: member="RoombotApi.h::roombotApi_isConnected" ref="316d949c3e73b3cdbda40bd1878a7d50" args="(int connectorID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int roombotApi_isConnected           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>connectorID</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If the module is connected on a specific connector 
</div>
</div><p>
<a class="anchor" name="d9de3fd7561cb52f9cb9a004040b6240"></a><!-- doxytag: member="RoombotApi.h::roombotApi_runTestProgram" ref="d9de3fd7561cb52f9cb9a004040b6240" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void roombotApi_runTestProgram           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Run a test program, testing this API 
</div>
</div><p>
<a class="anchor" name="614aad6d05afc6e989728c7d15b64e76"></a><!-- doxytag: member="RoombotApi.h::roombotApi_sendMessage" ref="614aad6d05afc6e989728c7d15b64e76" args="(char *msg, int length, int channel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void roombotApi_sendMessage           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>channel</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Send a message on a given communication channel IR(0-9) Wifi (10) 
</div>
</div><p>
<a class="anchor" name="3ab90b531a04ac7a26647838a881eae5"></a><!-- doxytag: member="RoombotApi.h::roombotApi_sendMessageToAll" ref="3ab90b531a04ac7a26647838a881eae5" args="(char *msg, int length)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void roombotApi_sendMessageToAll           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>length</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Send the same message to all neighbor channels IR (0-9)<p>
Note: this method only sends to neighbors (not all in robot) 
</div>
</div><p>
<a class="anchor" name="ea11b23768dacee3958e205daed3c56c"></a><!-- doxytag: member="RoombotApi.h::roombotApi_setMessageHandler" ref="ea11b23768dacee3958e205daed3c56c" args="(void(*handler)(char *, char, char))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void roombotApi_setMessageHandler           </td>
          <td>(</td>
          <td class="paramtype">void(*)(char *, char, char)&nbsp;</td>
          <td class="paramname"> <em>handler</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the callback function which will be called each time a message is received 
</div>
</div><p>
<a class="anchor" name="929da0f93b13ae0c31a1371e06d133bc"></a><!-- doxytag: member="RoombotApi.h::roombotApi_setServoPosition" ref="929da0f93b13ae0c31a1371e06d133bc" args="(int servoID, double goal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void roombotApi_setServoPosition           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>servoID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>goal</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the position that the underlying p-controller will move the actuator towards 
</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Thu Mar 11 16:24:40 2010 for ASE by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
